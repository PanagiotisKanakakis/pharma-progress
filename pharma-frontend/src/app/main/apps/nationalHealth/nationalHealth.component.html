<div class="content-wrapper container-xxl p-0">
    <div class="content-body">
        <section id="ngx-datatable-inline-editing">
            <div class="row">
                <div class="col-lg-8">
                    <form class="form-inline" style="margin-left: 10px;margin-bottom:15px;">
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary feather icon-calendar"
                                            (click)="basicDP.toggle()"
                                            type="button" rippleEffect></button>
                                </div>
                                <input class="form-control" placeholder="mm-yyyy" name="Basic Date Picker"
                                       [(ngModel)]="basicDPdata" form
                                       ngbDatepicker #basicDP="ngbDatepicker" (dateSelect)="onDateSelect($event)">

                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-lg-4">
                    <div class="col-12 mb-50">
                        <button class="btn btn-primary ml-1" style="float: right" rippleEffect
                                (click)="addNewRow(undefined, 0,'', undefined)">
                            <i data-feather="plus" class="mr-0 mr-sm-1"></i>
                            <span class="d-none d-sm-inline-block">{{ 'BUTTON.ADD_NEW_RECORD' | translate }}</span>
                        </button>
                    </div>
                </div>
            </div>

            <core-card>
                <div class="card card-statistics">
                    <div class="card-body statistics-body">
                        <div class="row">
                            <div class="col-xl-12 col-md-12 col-12">
                                <div class="card card-company-table">
                                    <div class="card-body p-0">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-dark table-borderless">
                                                <thead>
                                                <tr>
                                                    <th class="text-center" style="color: white!important;">
                                                        {{'TABLE.CATEGORY' | translate}}
                                                    </th >
                                                    <th class="text-center" style="color: white!important;">
                                                        {{'TABLE.DATE' | translate}}
                                                    </th>
                                                    <th class="text-center" style="color: white!important;">
                                                        {{'TABLE.VALUE' | translate}}
                                                    </th>
                                                    <th class="text-center" style="color: white!important;">
                                                        {{'TABLE.DESCRIPTION' | translate}}
                                                    </th>
                                                    <th class="text-center" style="color: white!important;">
                                                        {{'TABLE.ACTION' | translate}}
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr *ngFor="let row of rows;let rowIndex=index;">
                                                    <td>
                                                        <div class="block btn btn-btn-success accent-4"
                                                             style="white-space: nowrap;margin-left: 5px;width: available">
                                                            {{row.paymentType | translate}}
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div title="Double click to edit"
                                                             class="text-center"
                                                             (dblclick)="editingDateValue[rowIndex] = true"
                                                             *ngIf="!editingDateValue[rowIndex]"
                                                             style="font-weight: bold;font-size: 13px;">
                                                            {{row.createdAt}}
                                                        </div>
                                                        <input autofocus
                                                               type="text"
                                                               class="form-control"
                                                               placeholder="dd-mm-yyyy"
                                                               *ngIf="editingDateValue[rowIndex]"
                                                               (blur)="parseDate($event,rowIndex)"
                                                               [formControl]="dateFormControl[rowIndex]">
                                                        <span *ngIf="!dateFormControl[rowIndex].valid"
                                                              class="invalid-form">
                                                            <small class="form-text text-muted danger"
                                                                   *ngIf="dateFormControl[rowIndex].errors?.pattern">
                                                                {{'TABLE.DATE_PATTERN' | translate}}
                                                            </small>
                                                            <small class="form-text text-muted danger"
                                                                   *ngIf="dateFormControl[rowIndex].errors?.range">
                                                                {{'TABLE.DATE_LIMIT' | translate}}
                                                            </small>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <div title="Double click to edit"
                                                             class="text-center"
                                                             (click)="editingValue[rowIndex] = true"
                                                             *ngIf="!editingValue[rowIndex]">
                                                            {{row.cost}}€
                                                        </div>
                                                        <input autofocus
                                                               class="form-control form-control-sm"
                                                               (blur)="inlineEditingUpdateValue($event,rowIndex)"
                                                               *ngIf="editingValue[rowIndex]"
                                                               type="number"
                                                               [formControl]="numberFormControl[rowIndex]"
                                                        />
                                                        <span *ngIf="!numberFormControl[rowIndex].valid"
                                                              class="invalid-form">
                                                            <small class="form-text text-muted danger"
                                                                   *ngIf="numberFormControl[rowIndex].errors?.required">
                                                                            {{'TABLE.NUMBER_REQUIRED' | translate}}
                                                            </small>
                                                            <small class="form-text text-muted danger"
                                                                   *ngIf="numberFormControl[rowIndex].errors?.min">
                                                                            {{'TABLE.NUMBER_PATTERN' | translate}}
                                                            </small>
                                                        </span>
                                                    </td>
                                                    <td class="text-nowrap">
                                                        <input type="text" class="form-control">
                                                    </td>
                                                    <td>
                                                        <div *ngIf="row.id == undefined" class="align-items-center text-center"
                                                             (click)="removeRow(rowIndex)">
                                                            <i data-feather="trash-2"
                                                               class="text-primary cursor-pointer"></i>
                                                        </div>
                                                        <div *ngIf="row.id != undefined" class="align-items-center text-center">
                                                            -
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                                <tfoot>
                                                <tr>
                                                    <td>
                                                        Σύνολο:  {{ summaryColumn() }}€
                                                    </td>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </core-card>
        </section>
    </div>
</div>
